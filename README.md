# Gyazo Capture Bridge (macOS)

Language: **English** | [Українська](./docs/README.uk.md) | [日本語](./docs/README.ja.md)
Start here: [Why This Exists](./docs/WHY.md) | [Навіщо це](./docs/WHY.uk.md) | [このプロジェクトの目的](./docs/WHY.ja.md)

A small macOS bridge that uploads image captures to Gyazo.
It works with any capture workflow that saves image files to a folder: Shottr, macOS Screenshot, CleanShot X, Flameshot, or your own script.
Gyazo is a fast visual capture service for storing and sharing screenshots/notes with stable links, OCR search, and tags, which makes it useful as an external visual memory layer for daily work; see [gyazo.com](https://gyazo.com) and [Gyazo API docs](https://gyazo.com/api/docs).

[![Gyazo Capture Bridge illustration](https://i.gyazo.com/8815d471c12ad68a29ee2404d21ad6ee.png?v=2)](https://gyazo.com/8815d471c12ad68a29ee2404d21ad6ee)
This is a real note card generated by the notes pipeline. Details: [What you get](#features-overview).

## Live Demo (Gyazo)

- Japanese haiku: [https://gyazo.com/2a50c223fa97964302a66090fb645ee1](https://gyazo.com/2a50c223fa97964302a66090fb645ee1)
- English haiku: [https://gyazo.com/b23738a55339459d9942606bac7128d9](https://gyazo.com/b23738a55339459d9942606bac7128d9)
- Ukrainian haiku: [https://gyazo.com/a05b87ac0f2de93f75af7b6216d0b0d1](https://gyazo.com/a05b87ac0f2de93f75af7b6216d0b0d1)

<a id="features-overview"></a>
## What you get

- Manual upload (`upload_gyazo.sh`)
- Auto upload via `launchd` (`auto_dispatch.sh` + `install_launch_agent.sh`)
- Gyazo metadata controls (app, source/title, description, tags, access policy)
- Notes pipeline (`notes_capture_from_clipboard.sh` + `notes_pipeline.js`) for text -> image cards -> Gyazo
- Notes presets (`mobile`, `desktop`, `custom`) and multipage support

## Project files

- `config.env` - local runtime settings (do not commit)
- `config.env.example` - template
- `upload_gyazo.sh` - upload image capture to Gyazo
- `auto_dispatch.sh` - auto-upload dispatcher
- `install_launch_agent.sh` / `uninstall_launch_agent.sh` - auto mode setup
- `com.gyazo-capture-bridge.plist.template` - LaunchAgent template
- `notes_capture_from_clipboard.sh` - capture text into notes inbox
- `notes_process_inbox.sh` - process notes inbox
- `notes_pipeline.js` - render cards, upload, archive, index
- `integrations/keyboard-maestro/` - optional Keyboard Maestro macro export + setup notes
- `docs/` - all project documentation (multilingual guides, rationale, legal notes, decision log)

## Requirements

- macOS
- `curl`, `plutil`, `osascript`, `pbcopy`
- `node` (for notes pipeline)
- `python3` + Pillow recommended for best notes rendering quality
- any capture app/tool saving image files into `CAPTURE_DIR`

## Get project files (macOS)

Option A: with Git

```bash
git clone https://github.com/vitalibondar/gyazo-capture-bridge.git
cd gyazo-capture-bridge
```

Option B: without Git

1. Open the repository page on GitHub.
2. Click `Code` -> `Download ZIP`.
3. Unzip archive and open the extracted folder in Terminal.

## Quick setup

1. Enter project directory:

```bash
cd /path/to/gyazo-capture-bridge
```

2. Create local config:

```bash
cp ./config.env.example ./config.env
```

3. Edit config:

```bash
open -e ./config.env
```

4. Set `GYAZO_ACCESS_TOKEN` and `CAPTURE_DIR`.

## Get Gyazo access token

1. Log in: [Gyazo Login](https://gyazo.com/login)
2. Open API page: [Gyazo API](https://gyazo.com/api)
3. Open app dashboard: [Gyazo OAuth Apps](https://gyazo.com/oauth/applications)
4. Create app: [New OAuth App](https://gyazo.com/oauth/applications/new)
5. Generate access token and paste into `config.env`

Token format in `config.env`:

```bash
GYAZO_ACCESS_TOKEN="YOUR_REAL_TOKEN"
```

Do not prepend `Bearer` in `config.env`.

Token check:

```bash
TOKEN="YOUR_REAL_TOKEN"
curl -sS https://api.gyazo.com/api/users/me -H "Authorization: Bearer $TOKEN"
```

## Manual upload

Upload latest file from `CAPTURE_DIR`:

```bash
./upload_gyazo.sh
```

Upload explicit file:

```bash
./upload_gyazo.sh "$CAPTURE_DIR/example.png"
```

## Auto upload mode

Install launch agent:

```bash
source ./config.env
./install_launch_agent.sh "$CAPTURE_DIR"
```

Uninstall:

```bash
./uninstall_launch_agent.sh
```

## Notes pipeline

Capture text from clipboard (and optionally process immediately if `NOTES_PROCESS_AFTER_CAPTURE=true`):

```bash
./notes_capture_from_clipboard.sh
```

Capture explicit text:

```bash
./notes_capture_from_clipboard.sh "My note $(date)"
```

Process inbox manually:

```bash
./notes_process_inbox.sh
```

## Important metadata settings

- `GYAZO_ACCESS_POLICY`: `only_me` or `anyone`
- `GYAZO_TITLE_BROWSER_MODE`: `url` or `tab`
- `GYAZO_DESC_TAG`: final hashtag line (single token recommended)
- `GYAZO_DESC_STYLE`: `compact` or `labeled`
- `CAPTURE_DIR`: watched folder for image captures

## Important macOS permissions

You may need to allow:

- Accessibility (front app/window detection)
- Automation (browser URL/title reads)
- Files and Folders (access to Pictures/Documents)

## Automation tools (optional)

You can trigger note capture from any automation tool or run scripts directly in terminal.
Ready-made Keyboard Maestro macro: `integrations/keyboard-maestro/Gyazo-Capture-Bridge__Capture-Selection-to-Gyazo-Note.kmmacros`

After import:
1. Set `GCB_PROJECT_DIR` to your local project path.
2. Set your own hotkey.
3. Keep `Execute Shell Script` input mode as `Nothing`.

## Troubleshooting

`You are not authorized.`
- Wrong token value (often `client_secret` instead of access token)

`Capture file not found: <empty>`
- `CAPTURE_DIR` is wrong or folder has no image files

`No text input found (args/stdin/clipboard).`
- Notes capture script got empty args/stdin/clipboard

`No notes in inbox.`
- No `.md` or `.txt` in `NOTES_INBOX_DIR`

## Legal

This project is independent and not affiliated with Gyazo / Helpfeel Inc.
See [TRADEMARKS.md](./docs/TRADEMARKS.md).

## License

MIT. See [LICENSE](./LICENSE).
